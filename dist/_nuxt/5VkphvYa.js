import{a as O,_ as Y}from"./Dk0sIfQS.js";import{_ as G,a as H,b as X,c as J,d as Q}from"./D5NuLxSS.js";import{e as W,r as V,f as M,g as Z,h as q,i as tt,o as w,w as g,a as e,b as d,c as B,j as T,d as F,k as et,F as z,l as nt,t as R,n as ot,_ as at,m as st}from"./DkPTbWBy.js";import{P as lt,f as it}from"./CdJa3PfA.js";import"./eDBf4Lmr.js";import"./D867hkr2.js";async function rt({responses:L,summaryPngDataUrl:p,infoPngDataUrl:_}){const u=await fetch("/forms/wemwbs.pdf").then(o=>o.arrayBuffer()),m=await lt.load(u);m.registerFontkit(it);const U=await fetch("/fonts/NotoKufiArabic-Medium.ttf").then(o=>o.arrayBuffer()),b=await m.embedFont(U),x=m.getPage(0),v=640,y=21.5,f=[350,280,210,140,70],i={};for(let o=1;o<=14;o++){const a=v-(o-1)*y;i[o]={1:[f[0],a],2:[f[1],a],3:[f[2],a],4:[f[3],a],5:[f[4],a]}}if(Object.entries(L).forEach(([o,a])=>{const c=Number(o);if(i[c]&&i[c][a]){const[N,n]=i[c][a];x.drawText("X",{x:N,y:n,size:14,font:b})}}),p){const o=await(await fetch(p)).arrayBuffer(),a=await m.embedPng(o),c=a.scale(.7);x.drawImage(a,{x:-80,y:150,width:c.width,height:c.height})}if(_){const o=await(await fetch(_)).arrayBuffer(),a=await m.embedPng(o),c=a.scale(.7);x.drawImage(a,{x:10,y:220,width:c.width,height:c.height})}return await m.save()}const ct={dir:"ltr",class:"text-left my-4"},dt={class:"space-y-4"},ut={class:"font-medium"},mt={class:"options"},ft={class:"actions"},pt={key:0,type:"submit",class:"primary-btn linear-g"},bt={key:2,class:"error"},vt={key:0,class:"results"},_t={class:"score-value"},wt={class:"score-band"},gt=W({__name:"wemwbsRTL",setup(L){const p=V(""),_=V(""),u=V(""),m=M(),U=()=>{m.go(0)},b=[{id:1,text:"أشعر بالتفاؤل بما يخص المستقبل"},{id:2,text:"أشعر بأني مفيد"},{id:3,text:"أشعر بالاسترخاء"},{id:4,text:"أشعر بأني مهتم بالآخرين"},{id:5,text:"أملك الطاقة والحيوية"},{id:6,text:"أتعامل مع المشاكل بشكل جيد"},{id:7,text:"أفكر بوضوح"},{id:8,text:"أشعر بالرضا عن نفسي"},{id:9,text:"أشعر بأني قريب من الآخرين"},{id:10,text:"أشعر بالثقة"},{id:11,text:"أنا قادر على اتخاذ قراراتي بنفسي"},{id:12,text:"أشعر بأني محبوب"},{id:13,text:"أشعر بالحماس للأشياء الجديدة"},{id:14,text:"أشعر بالبهجة"}],x=[{label:"أبداً",value:1},{label:"نادراً",value:2},{label:"بعض الأوقات",value:3},{label:"غالباً",value:4},{label:"دائماً",value:5}],v=Z(Object.fromEntries(b.map(n=>[n.id,void 0]))),y=V(!1),f=V(""),i=q(()=>{let n=0;for(const t of b){const h=v[t.id];h!==void 0&&(n+=h)}return n});function I(n){return n<33?"منخفض جداً":n<41?"أقل من المتوسط":n<60?"متوسط":"اكثر من المتوسط"}function o(n){const t=I(n);return t==="منخفض جداً"?"band-very-high":t==="أقل من المتوسط"?"band-mild":"band-ok"}function a(){return b.every(n=>v[n.id]!==void 0&&v[n.id]!==null)}function c(){if(!a()){f.value="من فضلك أجب عن جميع الأسئلة قبل عرض النتائج.",y.value=!1;return}f.value="",y.value=!0}async function N(){const n={};for(const[k,s]of Object.entries(v))s!==void 0&&(n[Number(k)]=s);const t=`مجموع النتائج: ${i.value} / 70 (`+I(i.value)+")",h=[`الاسم: ${p.value}`,`المواليد: ${_.value}`,`الجنس: ${u.value}`];function C(k){const s=document.createElement("canvas");s.width=800,s.height=150;const r=s.getContext("2d");return r.clearRect(0,0,s.width,s.height),r.fillStyle="#006570",r.font='bold 24px "Noto Kufi Arabic", Arial',r.textAlign="right",r.direction="rtl",r.fillText(k,s.width-20,80),s.toDataURL("image/png")}function $(k){const s=document.createElement("canvas");s.width=800,s.height=k.length*40+40;const r=s.getContext("2d");r.fillStyle="#006570",r.font='20px "Noto Kufi Arabic", Arial',r.textAlign="right",r.direction="rtl";let D=40;for(const K of k)r.fillText(K,s.width-20,D),D+=40;return s.toDataURL("image/png")}const S=C(t),E=$(h),P=await rt({responses:n,totalScore:i.value,interpretation:I(i.value),summaryPngDataUrl:S,infoPngDataUrl:E}),l=new Blob([P],{type:"application/pdf"}),A=URL.createObjectURL(l),j=document.createElement("a");j.href=A,j.download="WEMWBS_Result.pdf",j.click(),URL.revokeObjectURL(A)}return(n,t)=>{const h=G,C=X,$=J,S=H,E=O,P=Y;return w(),tt(P,{class:"wemwbs-app my-10"},{default:g(()=>[t[10]||(t[10]=e("div",{class:"text-center"},[e("p",{class:"dark:text-neutral-400 text-sm"},[F(" في الأسفل توجد عبارات تصف المشاعر والأفكار. يرجى وضع علامة في الخانة التي تصف تجربتك خلال "),e("span",{class:"font-bold text-red-400"}," الأسبوعين الماضيين. ")])],-1)),e("div",ct,[d(h)]),d(S,{class:"mb-4 shadow"},{default:g(()=>[e("div",dt,[e("div",null,[t[3]||(t[3]=e("label",{class:"block mb-2 font-medium"},"الاسم",-1)),d(C,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),class:"w-full",placeholder:"اكتب اسمك هنا"},null,8,["modelValue"])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block w-full mb-2 font-medium"},"سنة الميلاد",-1)),d(C,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=l=>_.value=l),class:"w-full",type:"number",placeholder:"مثال: 1990"},null,8,["modelValue"])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block mb-2 font-medium"},"الجنس",-1)),d($,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),class:"w-full",variant:"table",items:[{label:"ذكر",value:"ذكر"},{label:"أنثى",value:"أنثى"}]},null,8,["modelValue"])])])]),_:1}),e("form",{class:"wemwbs-form",onSubmit:et(c,["prevent"])},[(w(),B(z,null,nt(b,l=>d(S,{key:l.id,class:"mb-4 shadow"},{default:g(()=>[e("div",null,[e("p",ut,R(l.id)+" - "+R(l.text),1)])]),footer:g(()=>[e("div",mt,[d($,{modelValue:v[l.id],"onUpdate:modelValue":A=>v[l.id]=A,items:x,variant:"table",indicator:"end",class:"w-full",size:"md"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)),64)),e("div",ft,[y.value?(w(),B("button",{key:1,type:"button",class:"primary-btn linear-r",onClick:U}," إعادة الحساب ")):(w(),B("button",pt," عرض نتائجي ")),f.value?(w(),B("p",bt,R(f.value),1)):T("",!0)])],32),y.value?(w(),B("section",vt,[t[8]||(t[8]=e("h2",null,"النتيجة",-1)),e("div",{class:ot(["score-card",o(i.value)])},[t[6]||(t[6]=e("h3",null,"مجموع الصحة النفسية",-1)),e("p",_t,R(i.value)+" / 70",1),e("p",wt,R(I(i.value)),1)],2),d(E,{onClick:N,class:"primary-btn linear-g mt-4"},{default:g(()=>[...t[7]||(t[7]=[F(" تنزيل النسخة الأصلية مع التقرير ",-1)])]),_:1}),t[9]||(t[9]=e("p",{class:"mt-8 text-neutral-500 text-xs text-justify"}," أعلى درجة ممكنة هي 70 وأقل درجة هي 14. النتيجة الأعلى تعني مستوى أعلى من الصحة النفسية والرفاهية. ",-1))])):T("",!0)]),_:1})}}}),xt=Object.assign(at(gt,[["__scopeId","data-v-de0aba68"]]),{__name:"WemwbsRTL"}),Vt=W({__name:"wemwbs",setup(L){const p=M();return(_,u)=>{const m=O,U=Q,b=xt;return w(),B(z,null,[d(U,null,{left:g(()=>[d(m,{color:"neutral",variant:"ghost",icon:"i-heroicons-arrow-left",onClick:u[0]||(u[0]=x=>st(p).back())})]),default:g(()=>[...u[1]||(u[1]=[e("p",null,"WEMWBS",-1),e("p",{class:"px-2"},"-",-1),e("p",null,"مقياس وارويك-إدنبرة للصحة النفسية",-1)])]),_:1}),d(b)],64)}}});export{Vt as default};
