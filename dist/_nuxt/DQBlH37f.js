import{_ as it,a as ct}from"./Dk0sIfQS.js";import{_ as ut,a as dt,b as mt,c as ft,d as pt}from"./D5NuLxSS.js";import{_ as vt}from"./DM5UykzZ.js";import{e as nt,r as R,f as at,g as ht,h as k,i as yt,o as L,w as U,a as e,b as u,c as E,j as et,d as _t,k as ot,F as st,l as wt,t as a,n as g,_ as bt,m as xt}from"./DkPTbWBy.js";import{P as gt,f as Tt}from"./CdJa3PfA.js";import"./eDBf4Lmr.js";import"./D867hkr2.js";async function St({responses:O,summaryPngDataUrl:_,info:T}){const d=await fetch("/forms/sdq_ar_self.pdf").then(c=>c.arrayBuffer()),m=await gt.load(d);m.registerFontkit(Tt);const B=await fetch("/fonts/NotoKufiArabic-Medium.ttf").then(c=>c.arrayBuffer()),V=await m.embedFont(B),h=m.getPage(0),q={1:{notTrue:[151,635],somewhat:[99,635],certainly:[48,635]},2:{notTrue:[151,615],somewhat:[99,615],certainly:[48,615]},3:{notTrue:[151,595],somewhat:[99,595],certainly:[48,595]},4:{notTrue:[151,575],somewhat:[99,575],certainly:[48,575]},5:{notTrue:[151,555],somewhat:[99,555],certainly:[48,555]},6:{notTrue:[151,535],somewhat:[99,535],certainly:[48,535]},7:{notTrue:[151,515],somewhat:[99,515],certainly:[48,515]},8:{notTrue:[151,495],somewhat:[99,495],certainly:[48,495]},9:{notTrue:[151,475],somewhat:[99,475],certainly:[48,475]},10:{notTrue:[151,455],somewhat:[99,455],certainly:[48,455]},11:{notTrue:[151,435],somewhat:[99,435],certainly:[48,435]},12:{notTrue:[151,414],somewhat:[99,414],certainly:[48,414]},13:{notTrue:[151,394],somewhat:[99,394],certainly:[48,394]},14:{notTrue:[151,374],somewhat:[99,374],certainly:[48,374]},15:{notTrue:[151,353],somewhat:[99,353],certainly:[48,353]},16:{notTrue:[151,333],somewhat:[99,333],certainly:[48,333]},17:{notTrue:[151,313],somewhat:[99,313],certainly:[48,313]},18:{notTrue:[151,293],somewhat:[99,293],certainly:[48,293]},19:{notTrue:[151,273],somewhat:[99,273],certainly:[48,273]},20:{notTrue:[151,253],somewhat:[99,253],certainly:[48,253]},21:{notTrue:[151,233],somewhat:[99,233],certainly:[48,233]},22:{notTrue:[151,213],somewhat:[99,213],certainly:[48,213]},23:{notTrue:[151,193],somewhat:[99,193],certainly:[48,193]},24:{notTrue:[151,173],somewhat:[99,173],certainly:[48,173]},25:{notTrue:[151,153],somewhat:[99,153],certainly:[48,153]}};Object.entries(O).forEach(([c,p])=>{const v=q[c][p===0?"notTrue":p===1?"somewhat":"certainly"];h.drawText("x",{x:v[0],y:v[1],size:20,font:V})});const y=await(await fetch(_)).arrayBuffer(),f=await m.embedPng(y),w=f.scale(.7);h.drawImage(f,{x:-150,y:-13,width:w.width,height:w.height});const K=await(await fetch(T)).arrayBuffer(),A=await m.embedPng(K),F=A.scale(.7);return h.drawImage(A,{x:-50,y:640,width:F.width,height:F.height}),await m.save()}const $t={dir:"ltr",class:"text-left my-4"},It={class:"space-y-4"},kt={class:"options"},Ut={class:"actions"},Bt={key:0,class:"error"},Vt={key:0,class:"results"},Nt={class:"score-value"},Ct={class:"score-band"},Dt={class:"scores-grid"},Rt={class:"score-value"},Lt={class:"score-band"},At={class:"score-value"},Ft={class:"score-band"},Pt={class:"score-value"},jt={class:"score-band"},Et={class:"score-value"},Ot={class:"score-band"},qt={class:"score-value"},Kt={class:"score-band"},zt=nt({__name:"SdqSelfFormRTL",setup(O){const _=R(""),T=R(""),d=R(""),m=at(),B=()=>{m.go(0)};async function V(){const n={};for(const[x,l]of Object.entries(y))n[Number(x)]=Number(l);const t={total:C.value,emotional:c.value,conduct:p.value,hyper:v.value,peer:$.value,prosocial:N.value},o={total:r("total",C.value),emotional:r("emotional",c.value),conduct:r("conduct",p.value),hyper:r("hyperactivity",v.value),peer:r("peer",$.value),prosocial:r("prosocial",N.value)},b=[`مجموع الصعوبات: ${t.total} / 40 – ${o.total}`,`الأعراض الانفعالية: ${t.emotional} / 10 – ${o.emotional}`,`مشكلات السلوك: ${t.conduct} / 10 – ${o.conduct}`,`فرط الحركة وتشتت الانتباه: ${t.hyper} / 10 – ${o.hyper}`,`مشكلات الأقران: ${t.peer} / 10 – ${o.peer}`,`السلوك الاجتماعي الإيجابي: ${t.prosocial} / 10 – ${o.prosocial}`],P=[`الاسم: ${_.value}`,`المواليد: ${T.value}`,`الجنس: ${d.value}`];function j(x){const l=document.createElement("canvas");l.width=800,l.height=x.length*30+40;const i=l.getContext("2d");i.fillStyle="#006570",i.font='16px "Noto Kufi Arabic", Arial',i.textAlign="right",i.direction="rtl";let D=30;for(const H of x)i.fillText(H,l.width-20,D),D+=30;return l.toDataURL("image/png")}function z(x){const l=document.createElement("canvas");l.width=800,l.height=x.length*30+40;const i=l.getContext("2d");i.fillStyle="#006570",i.font='16px "Noto Kufi Arabic", Arial',i.textAlign="right",i.direction="rtl",i.fontKerning="normal",i.fontStretch="expanded";let D=30;for(const H of x)i.fillText(H,l.width-20,D),D+=30;return l.toDataURL("image/png")}const M=j(b),s=z(P),Q=await St({responses:n,summaryPngDataUrl:M,info:s}),lt=new Blob([Q],{type:"application/pdf"}),tt=URL.createObjectURL(lt),G=document.createElement("a");G.href=tt,G.download="SDQ_self_report_with_results.pdf",G.click(),URL.revokeObjectURL(tt)}const h=[{id:1,text:"أحاول أن أكون لطيفاً مع الآخرين وأهتم بمشاعرهم."},{id:2,text:"أنا كثير الحركة ولا أستطيع البقاء جالساً لفترة طويلة."},{id:3,text:"أُصاب كثيراً بالصداع أو ألم المعدة أو أشعر بالتوعك."},{id:4,text:"عادةً ما أشارك الآخرين في أشيائي، مثل الأقراص والألعاب والطعام."},{id:5,text:"أغضب جداً وأفقد أعصابي كثيراً."},{id:6,text:"أفضل أن أبقى وحدي على أن أكون مع من هم في مثل عمري."},{id:7,text:"عادةً ما أنفذ ما يُطلب مني."},{id:8,text:"أفكر وأقلق كثيراً بشأن أشياء مختلفة."},{id:9,text:"أكون متعاوناً عندما يكون شخص ما متألماً أو منزعجاً أو مريضاً."},{id:10,text:"أتحرك باستمرار وأعبث كثيراً في مكاني."},{id:11,text:"لدي صديق جيد واحد على الأقل، وربما أكثر."},{id:12,text:"أدخل في شجار كثيراً، ويمكنني أن أجبر الآخرين على فعل ما أريد."},{id:13,text:"غالباً ما أشعر بالحزن أو الاكتئاب أو أبكي كثيراً."},{id:14,text:"أقراني في نفس عمري غالباً ما يحبونني."},{id:15,text:"أتشتت بسهولة؛ أجد صعوبة في التركيز والانتباه."},{id:16,text:"أتوتر في المواقف الجديدة وأفقد ثقتي بنفسي بسهولة."},{id:17,text:"أعامل الأطفال الأصغر مني بلطف."},{id:18,text:"غالباً ما يتهمني الآخرون بالكذب أو الغش."},{id:19,text:"يتعرض لي الأطفال أو اليافعون الآخرون، يضايقونني أو يتنمّرون عليّ."},{id:20,text:"غالباً ما أُبادر لمساعدة الآخرين (أهلي، معلميَّ، الأطفال)."},{id:21,text:"أفكر جيداً قبل أن أتصرف."},{id:22,text:"آخذ أشياء ليست لي من البيت أو المدرسة أو من أماكن أخرى."},{id:23,text:"أتفاهم مع البالغين أفضل من تفاهمي مع من هم في مثل عمري."},{id:24,text:"لدي مخاوف كثيرة، وأخاف بسهولة."},{id:25,text:"أنهي الأعمال التي أبدأ بها؛ يكون انتباهي جيداً أغلب الوقت."}],q=[{label:"غير صحيح",value:0},{label:"صحيح إلى حد ما",value:1},{label:"صحيح تماماً",value:2}],y=ht(Object.fromEntries(h.map(n=>[n.id,void 0]))),f=R(!1),w=R(""),Y=new Set([7,11,14,21,25]);function J(n){const t=y[n];if(t==null)return NaN;const o=Number(t);return Y.has(n)?o===0?2:o===2?0:1:o}const K=[3,8,13,16,24],A=[5,7,12,18,22],F=[2,10,15,21,25],W=[6,11,14,19,23],X=[1,4,9,17,20];function S(n){return n.reduce((t,o)=>{const b=J(o);return Number.isNaN(b)?t:t+b},0)}const c=k(()=>S(K)),p=k(()=>S(A)),v=k(()=>S(F)),$=k(()=>S(W)),N=k(()=>S(X)),C=k(()=>c.value+p.value+v.value+$.value);function r(n,t){switch(n){case"total":return t<=14?"ضمن المعدل":t<=17?"أعلى من المعدل قليلاً":t<=19?"مرتفع":"مرتفع جداً";case"emotional":return t<=4?"ضمن المعدل":t===5?"أعلى من المعدل قليلاً":t===6?"مرتفع":"مرتفع جداً";case"conduct":return t<=3?"ضمن المعدل":t===4?"أعلى من المعدل قليلاً":t===5?"مرتفع":"مرتفع جداً";case"hyperactivity":return t<=5?"ضمن المعدل":t===6?"أعلى من المعدل قليلاً":t===7?"مرتفع":"مرتفع جداً";case"peer":return t<=2?"ضمن المعدل":t===3?"أعلى من المعدل قليلاً":t===4?"مرتفع":"مرتفع جداً";case"prosocial":return t>=7?"ضمن المعدل":t===6?"أقل من المعدل قليلاً":t===5?"منخفض":"منخفض جداً"}}function I(n,t){const o=r(n,t);return o==="ضمن المعدل"?"band-ok":o==="أعلى من المعدل قليلاً"||o==="أقل من المعدل قليلاً"?"band-mild":o==="مرتفع"||o==="منخفض"?"band-high":"band-very-high"}function rt(){return h.every(n=>y[n.id]!==null&&y[n.id]!==void 0)}function Z(){if(!rt()){w.value="من فضلك أجب عن جميع الأسئلة قبل عرض النتائج.",f.value=!1;return}w.value="",f.value=!0}return(n,t)=>{const o=ut,b=mt,P=ft,j=dt,z=vt,M=it;return L(),yt(M,{class:"sdq-app my-10"},{default:U(()=>[t[15]||(t[15]=e("div",{class:"text-center"},[e("p",{class:"dark:text-neutral-400 text-sm"},[_t(" من فضلك أجب عن كيفية كون الأمور معك خلال "),e("span",{class:"font-bold text-red-400"}," الأشهر الستة الماضية. ")])],-1)),e("div",$t,[u(o)]),u(j,{class:"mb-4 shadow"},{default:U(()=>[e("div",It,[e("div",null,[t[4]||(t[4]=e("label",{class:"block mb-2 font-medium"},"الاسم",-1)),u(b,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s),class:"w-full",placeholder:"اكتب اسمك هنا"},null,8,["modelValue"])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block w-full mb-2 font-medium"},"سنة الميلاد",-1)),u(b,{modelValue:T.value,"onUpdate:modelValue":t[1]||(t[1]=s=>T.value=s),class:"w-full",type:"number",placeholder:"مثال: 2010"},null,8,["modelValue"])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block mb-2 font-medium"},"الجنس",-1)),u(P,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),class:"w-full",variant:"table",items:[{label:"ذكر",value:"ذكر"},{label:"أنثى",value:"أنثى"}]},null,8,["modelValue"])])])]),_:1}),e("form",{class:"sdq-form",onSubmit:ot(Z,["prevent"])},[(L(),E(st,null,wt(h,s=>u(j,{key:s.id,class:"mb-4 shadow"},{default:U(()=>[e("div",null,[e("p",null,a(s.id)+" - "+a(s.text),1)])]),footer:U(()=>[e("div",kt,[u(P,{modelValue:y[s.id],"onUpdate:modelValue":Q=>y[s.id]=Q,items:q,variant:"table",indicator:"end",class:"w-full",size:"md"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)),64)),e("div",Ut,[e("button",{type:"submit",class:g(["primary-btn",f.value?"linear-r":"linear-g"]),onClick:t[3]||(t[3]=ot(s=>f.value?B():Z(),["prevent"]))},a(f.value?"إعادة الحساب":"عرض نتائجي"),3),w.value?(L(),E("p",Bt,a(w.value),1)):et("",!0)])],32),f.value?(L(),E("section",Vt,[t[13]||(t[13]=e("h2",null,"درجاتك",-1)),e("div",{class:g(["score-card",I("total",C.value)])},[t[7]||(t[7]=e("h3",null,"مجموع الصعوبات",-1)),e("p",Nt,a(C.value)+" / 40",1),e("p",Ct,a(r("total",C.value)),1)],2),u(z,{class:"my-4"}),e("div",Dt,[e("div",{class:g(["score-card",I("emotional",c.value)])},[t[8]||(t[8]=e("h3",null,"الأعراض الانفعالية",-1)),e("p",Rt,a(c.value)+" / 10",1),e("p",Lt,a(r("emotional",c.value)),1)],2),e("div",{class:g(["score-card",I("conduct",p.value)])},[t[9]||(t[9]=e("h3",null,"مشكلات السلوك",-1)),e("p",At,a(p.value)+" / 10",1),e("p",Ft,a(r("conduct",p.value)),1)],2),e("div",{class:g(["score-card",I("hyperactivity",v.value)])},[t[10]||(t[10]=e("h3",null,"فرط الحركة وتشتت الانتباه",-1)),e("p",Pt,a(v.value)+" / 10",1),e("p",jt,a(r("hyperactivity",v.value)),1)],2),e("div",{class:g(["score-card",I("peer",$.value)])},[t[11]||(t[11]=e("h3",null,"مشكلات الأقران",-1)),e("p",Et,a($.value)+" / 10",1),e("p",Ot,a(r("peer",$.value)),1)],2),e("div",{class:g(["score-card",I("prosocial",N.value)])},[t[12]||(t[12]=e("h3",null,"السلوك الاجتماعي الإيجابي",-1)),e("p",qt,a(N.value)+" / 10",1),e("p",Kt,a(r("prosocial",N.value)),1)],2)]),e("button",{onClick:V,class:"primary-btn linear-g"}," تنزيل النسخة الأصلية مع إجاباتك "),t[14]||(t[14]=e("p",{class:"mt-8 text-neutral-500 text-xs text-justify"}," هذه الدرجات لغرض الفحص الأولي فقط ولا تُعطي تشخيصاً. إذا شعرت بالقلق من هذه النتائج، من الأفضل أن تتحدث مع شخص بالغ موثوق أو مع مختص نفسي. ",-1))])):et("",!0)]),_:1})}}}),Mt=Object.assign(bt(zt,[["__scopeId","data-v-3c50bf76"]]),{__name:"SdqSelfFormRTL"}),Zt=nt({__name:"sdq",setup(O){const _=at();return(T,d)=>{const m=ct,B=pt,V=Mt;return L(),E(st,null,[u(B,null,{left:U(()=>[u(m,{color:"neutral",variant:"ghost",icon:"i-heroicons-arrow-left",onClick:d[0]||(d[0]=h=>xt(_).back())})]),default:U(()=>[...d[1]||(d[1]=[e("p",null,"SDQ",-1),e("p",{class:"px-2"},"-",-1),e("p",null,"استبيان نقاط القوة والصعوبات (نسخة ذاتية)",-1)])]),_:1}),u(V)],64)}}});export{Zt as default};
